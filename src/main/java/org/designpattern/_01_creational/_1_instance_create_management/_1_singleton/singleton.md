# Singleton 디자인 패턴

# 01. 가장 실질적인 코드와 이를 활용하는 실제 사례

## 1. 구현 코드
[code](code)

## 2. 사용 사례
### 공통점 : 전체에서 하나만, 중복 없어야  

- 애플리케이션 전체에서 하나의 인스턴스만 필요한 상황에서 사용 
- 즉, 중복이 있으면 안됨 

따라서, 
- Properties 관련
  - 여러 컴포넌트가 사용하는 공통의 설정파일
- Database connection pool
  - DB 연결이라는 비용을 줄이고자, 하나의 커넥션 풀을 만들어 모두 같이 사용 
- Thread pool
  - 스레드 생성 비용을 줄이기 위해, 풀을 만들고, 스레드 생성 대신 이곳의 스레드를 사용 
- Cache 
  - 여러 캐시가 필요하지 않을 경우, 하나의 캐시를 사용해 중복 데이터를 방지


# 02.  패턴이 가지는 강점과 약점

## 1. 장단점
### 장점
#### 1) 리소스 절약
    - 인스턴스 한 번만 생성 맟 재활용
#### 2) 객체 상태의 일관성 유지
    - 객체 여러 번 생성 것 방지 - 객체 상태를 일관되게 유지

### 단점
#### 1) 테스트 어려움 
    - 역적으로 공유되는 상태를 갖기 때문에, 테스트 시 독립성을 보장 어려움
#### 2) 결합도 증가
    - 전역 상태에 의존하면 강한 결합이 발생할 수 있음
#### 3) 병렬 처리 이슈
    - Singleton 인스턴스를 초기화하거나 접근하는 과정 동기화 문제
    - DoubleCheckedLocking 이나, Enum 이용하여 생성 필요 
#### 4) 설계 유연성 저하
    -  재사용이 어렵고, 다른 설계로 확장하려면 많은 변경이 필요


# 03. 동작 방식 이해 후, 이를 뒷받침하는 구조와 정의

## 1. 동작 원리

- 인스턴스 생성 제어
  - [클래스의 단일 인스턴스] 를 보장
  - 이 인스턴스에 [전역적으로 접근] 할 수 있게 함
- 스레드 안전성:
  - 다중 스레드 환경에서도 단일 인스턴스 생성을 보장하기 위해, 동기화 메커니즘을 사용할 수 있음.


## 2. 구조 - 3개 
````
+-----------------+
|   Singleton     |
+-----------------+
| - instance      |  // Static 변수
| + getInstance() |  // Static 메서드
+-----------------+
````
### 1) Private Constructor
   - 클래스 외부에서 직접 객체를 생성하지 못하도록 생성자를 private으로 선언
### 2) Static Instance
   - 클래스의 유일한 인스턴스를 저장하는 정적 변수
### 3) Static Factory Method
   - 인스턴스를 반환하는 정적 메서드
   - 필요 시 인스턴스를 생성

## 3. 정의
- 클래스의 단일 인스턴스 생성을 보장하고, 글로벌 접근을 제공하는 디자인 패턴
  - 실무에서는 설정 파일, 로깅, 데이터베이스 연결 풀과 같은 자원의 공유를 위해 자주 사용

## 4. 목적 - 3
  - 단일 책임 원칙(SRP) 준수: 인스턴스의 생성과 관리를 한 곳에서 처리
  - 자원 공유: 동일한 객체를 여러 곳에서 사용할 때 유용
  - 글로벌 접근 제공: 애플리케이션 전역에서 동일 객체 사용 가능.



# 04.  패턴이 적합한 상황과 선택의 이유를 다른 패턴과 비교하며 학습


## 1. 적용 조건 - 3
### 1) 애플리케이션 전역에서 단일 인스턴스가 필요할 때
### 2) 인스턴스 생성 비용이 높아, 재사용이 권장될 때
### 3) 글로벌 상태를 관리할 필요가 있을 때
  - 하나의 객체를 여러 모듈에서 공유해야 하는 경우

## 2. 비교와 선택
| 패턴                  | 목적                                   | 인스턴스 관리                          | 상태 관리                         | 사용 예시                           | 정보 은닉성                  |
|-----------------------|----------------------------------------|----------------------------------------|-----------------------------------|------------------------------------|-----------------------------|
| **Singleton**         | 단일 인스턴스 생성 보장                | 애플리케이션 전역에서 하나의 객체       | 전역적으로 상태 유지              | 로그 시스템, 캐시, 설정 관리       | 객체의 유일성 보장 및 관리   |
| **Prototype**         | 객체 복제를 통해 인스턴스 생성          | 새로운 객체를 복제하여 생성             | 복제 시 상태 복사 가능            | 문서 템플릿, 대량 데이터 복제      | 복제 로직 감춤              |
| **Factory Method**    | 객체 생성 과정을 캡슐화                | 매번 새 객체 생성                      | 새로 생성된 객체는 독립적 상태    | 데이터베이스 연결 생성             | 객체 생성 로직 숨김         |


## 3. 관련된 패턴
### 1) Prototype
#### 유사점
    객체 재사용을 통해 생성 비용을 절감.

#### 차이점 
    Singleton은 단일 객체를 보장하지만, Prototype은 다수 객체를 복제 가능

#### 활용 예시
    Singleton에서 Prototype을 활용해 동일 상태를 가진 여러 객체 생성

### 2) Factory Method
#### 유사점
    객체 생성을 캡슐화

#### 차이점
    Singleton은 단일 인스턴스를 생성하지만, Factory Method는 다양한 객체를 생성 가능

#### 활용 예시
    Factory Method를 사용하여 Singleton의 생성 로직을 캡슐화
````
public class SingletonFactory {
    private static Singleton instance;

    public static Singleton getInstance() {
        if (instance == null) {
            instance = new Singleton();
        }
        return instance;
    }
}
````
### 3) Flyweight
#### 유사점:
    메모리 효율성을 위해 동일 객체를 재사용

#### 차이점:
    Singleton은 단일 객체만 보장, Flyweight는 다수 객체가 동일 상태를 공유

#### 활용 예시:
    Singleton을 Flyweight와 결합하여 다수 객체의 상태를 중앙에서 관리.


# 04.  패턴을 실제로 사용할 때 발생할 수 있는 문제와 실전 사례

## 1. 오해와 주의점
- 이 패턴과 관련된 일반적인 오해는 무엇인가요?
  - 예: Singleton은 무조건 하나의 인스턴스만 생성된다는 오해.
- 패턴을 잘못 사용할 때 발생할 수 있는 문제를 설명하세요.
  - 예: 잘못된 Singleton 구현은 멀티스레드 환경에서 동기화 문제를 유발.



## 2. 프로젝트 경험
- 이 패턴을 실제 프로젝트에서 사용한 경험이 있나요?
- 사용했던 사례와 그 결과를 기록하세요.
  - 프로젝트 이름, 패턴 적용 이유, 결과 등.



## 3. 확장성
- 이 패턴을 확장하거나 변형하는 방법은 무엇인가요?
  - 예: Prototype 패턴에서 깊은 복사와 얕은 복사를 선택적으로 구현.
- 확장 가능한 구조로 설계하기 위한 팁이나 예시를 작성하세요.



## 4. 비용
- 이 패턴을 사용하는 데 드는 비용(성능, 코드 복잡도 등)을 분석하세요.
  - 예: Decorator는 클래스 수가 증가하여 코드가 복잡해질 수 있음.
- 효율적으로 사용할 수 있는 방법을 설명하세요.
  - 예: 필요 이상의 Decorator를 사용하지 않고 핵심 기능에만 적용.